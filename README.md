# Back-End-Trip-Split
# Building an API using a Relational Database

## Topics
- Databases
- Relational Databases
- Knex migrations
- Seeding data
- Creating endpoints
- Testing

#### Database Schemas

The _Database Schemas_ for the `users`, `trips`, `participants`, `events`, and `event participants` resources are:

## Users

Endpoint `/api/users/`
- `.get` returns an array of users who are registered in the database

| field                   | data type        | metadata                                            |
| ----------------------- | ---------------- | --------------------------------------------------- |
| id                      | unsigned integer | primary key, auto-increments, generated by database |
| username                | string           | required, unique                                    |
| password                | string           | required                                            |
| email                   | string           | required, unique                                    |
| thumbnail               | string           | not required                                        |

## Trips

Endpoints:
- `.get` to `/api/trips/` returns an array of all trips from all users in the database
- `.get` to `/api/trips/:id` returns an array of all trips from all users in the database
- `.post` to `/api/trips/` initializes a new trip
- `.delete` to `/api/trips/:id` deletes an entire trip by trip id 
- `.put` to `/api/trips/:id` lets you edit a trip by trip id with the edits in the req.body 

- `.get` to `/api/usertrips/:user_id` returns an array of all trips for each `user_id`

| field                   | data type        | metadata                                            |
| ----------------------- | ---------------- | --------------------------------------------------- |
| id                      | unsigned integer | auto-increments, generated by database              |
| user_id                 | integer          | foreign key, required, unique                       |
| date                    | string           | required                                            |
| location                | string           | required                                            |
| image                   | string           | not required                                        |
| isCurrent               | boolean          | required                                            |

- `id` is the Trip Id automatically assigned by the database
- `user_id` is the name of the User that you want to link this Trip to
- `date` is the date for the Trip, in dd/mm/yy format
- `location` is the title of the location of the Trip
- `image` is the string of the URL for a picture of the Trip to be displayed
- `isCurrent` is a boolean which tells you if the Trip is a current trip `true` or past trip `false`

## Trip Participants

Endpoints:
- `.get` to `/api/trip-participants/` returns an array of all participants from all trips in the database
- `.get` to `/api/usertrips/participants/:id` returns an array of all participants for the trip specified by `/:id`
- `.post` to `/api/usertrips/add-participant` initializes a new participant
- `.delete` to `/api/usertrips/delete-participant/:id` deletes a participant by `/:id` 
- `.put` to `/api/usertrips/edit-participant/:id` lets you edit a participant by participant `/:id` with the edits in the req.body 

| field                   | data type        | metadata                                            |
| ----------------------- | ---------------- | --------------------------------------------------- |
| id                      | unsigned integer | auto-increments, generated by database              |
| trips_id                | integer          | foreign key, required, unique                       |
| name                    | string           | required                                            |
| thumbnail               | string           | not required                                        |

- `id` is the Participant Id automatically assigned by the database
- `trips_id` is the name of the Trip that you want to link this Participant to
- `name` is the name of the Participant
- `thumbnail` is the string of the URL for a thumbnail of the Participant to be displayed

## Trip Events

Endpoints:
- `.get` to `/api/trip-events` returns an array of all events from all trips in the database
- `.get` to `/api/usertrips/events/:id` returns an array of all participants for the trip specified by `/:id`
- `.post` to `/api/usertrips/add-events` initializes a new event
- `.delete` to `/api/usertrips/delete-events/:id` deletes an event by `/:id` 
- `.put` to `/api/usertrips/edit-event/:id` lets you edit an event by event `/:id` with the edits in the req.body 

| field                   | data type        | metadata                                            |
| ----------------------- | ---------------- | --------------------------------------------------- |
| id                      | unsigned integer | auto-increments, generated by database              |
| trips_id                | integer          | foreign key, required, unique                       |
| title                   | string           | required                                            |
| total_price             | decimal          | required                                            |
| participants            | string           | required                                            |
| userOnTrip              | boolean          | required                                            |
| userPaid                | boolean          | required                                            |
| participantPaid         | string           | not-required                                        |

- `id` is the Event Id automatically assigned by the database
- `trips_id` is the name of the Trip that you want to link this Event to
- `date` is the date for the Event, in dd/mm/yy format
- `title` is the name of the Event you are initializing, ex) Marco's Pizza or Louvre Museum
- `total_price` is the total price of the Event, to be split between the participants, in decimal format, ex) 45.76
- `participants` is a string of the Participants' Id's, separated by commas
- `userOnTrip` is in retrospect a terribly used naming convention which tells you whether the User with `user_id` is on the Event
- `userPaid` is slightly less terribly named and is a boolean which tells you whether or not the User with `user_id` paid for the Event
- `participantPaid` is a string which would indicate the `trip_participants_id` of the Participant who paid for the Event.
